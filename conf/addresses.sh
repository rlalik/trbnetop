#!/bin/bash

## this script is called by conf.sh ##

echo "configure addresses"

### set addresses of FPGAs ###

trbcmd s 0x230000070f311a28  0x00 0x0350
trbcmd s 0x050000070ef9ac28  0x01 0x0351
trbcmd s 0xb00000039053e328  0x02 0x0352
trbcmd s 0x780000070f310a28  0x03 0x0353
trbcmd s 0x040000070ef7b728  0x05 0x0355

trbcmd s 0x6100000347f33b28  0x01 0xc035    # the CTS, crate #1
trbcmd s 0x0000163400202941  0x01 0x2000    #19
trbcmd s 0x00009c4600202941  0x01 0x2001    #14
trbcmd s 0x0000978800202941  0x01 0x2002    #16
trbcmd s 0x000011b900202941  0x01 0x2003    #21
trbcmd s 0x0000de46001f2941  0x01 0x2004    #20
trbcmd s 0x0000e4c9001f2941  0x01 0x2005    #42
trbcmd s 0x0000218d00572941  0x01 0x2006    #83
trbcmd s 0x00008cd000202941  0x01 0x2007    #23
trbcmd s 0x0000e6d3001f2941  0x01 0x2008    #13

trbcmd s 0x7a0000050df02428  0x01 0xc035    # the CTS, crate #2
trbcmd s 0x0000551800202941  0x01 0x2010    #17 broken
trbcmd s 0x0000714f00202941  0x01 0x2011    #18 broken
trbcmd s 0x0000e85c001f2941  0x01 0x2012    #15

echo "FPGAs after addressing"
trbcmd i 0xffff
